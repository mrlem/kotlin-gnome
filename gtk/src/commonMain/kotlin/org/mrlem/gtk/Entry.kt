package org.mrlem.gtk

import gtk3.*
import kotlinx.cinterop.CPointer
import kotlinx.cinterop.reinterpret
import kotlinx.cinterop.toKString

///////////////////////////////////////////////////////////////////////////
// Type
///////////////////////////////////////////////////////////////////////////

typealias Entry = CPointer<GtkEntry>

///////////////////////////////////////////////////////////////////////////
// Conversion
///////////////////////////////////////////////////////////////////////////

val Entry.asWidget: Widget
    get() = reinterpret()

val Entry.asObject: Object
    get() = reinterpret()

val Object.asEntry: Entry
    get() = reinterpret()

///////////////////////////////////////////////////////////////////////////
// Public API
///////////////////////////////////////////////////////////////////////////

val Entry.text
    get() = gtk_entry_get_text(this)!!.toKString()

fun Entry.setText(text: String) = gtk_entry_set_text(this, text)

///////////////////////////////////////////////////////////////////////////
// Events handlers
///////////////////////////////////////////////////////////////////////////

fun Entry.onActivate(onActivate: (Entry) -> Unit): Entry {
    asObject.connect("activate") { onActivate(this) }
    return this
}